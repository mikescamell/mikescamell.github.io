
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css?v=d3727471f6">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="https://mikescamell.com/the-vector-drawable-compat-diet/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="https://mikescamell.com/the-vector-drawable-compat-diet/amp/">
    
    <meta property="og:site_name" content="Mike Scamell">
    <meta property="og:type" content="article">
    <meta property="og:title" content="This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!">
    <meta property="og:description" content="This article was orginally posted on Medium on March 21st, 2016. You can find it
 here
[https://medium.com/p/this-app-did-the-vectordrawablecompat-diet-and-shed-2-4mb-and-it-s-so-easy-you-can-do-it-too-209846d99809]
.

If you haven’t heard already, Android now has VectorDrawableCompat
[https://medium.com/r/?url=http%3A%2F%2Fandroid-developers.blogspot.co.uk%2F2016%2F02%2Fandroid-support-library-232.html]
, hurrah!

There have been a few articles on how to use it already:

 * AppCompat v23.2 — Ag">
    <meta property="og:url" content="http://localhost:2368/the-vector-drawable-compat-diet/">
    <meta property="og:image" content="http://localhost:2368/content/images/2018/11/this_app_did_the_title_image-3.jpg">
    <meta property="article:published_time" content="2016-03-28T14:16:00.000Z">
    <meta property="article:modified_time" content="2018-11-18T19:24:37.000Z">
    <meta property="article:tag" content="vectordrawable">
    <meta property="article:tag" content="vectordrawablecompat">
    <meta property="article:tag" content="androiddev">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!">
    <meta name="twitter:description" content="This article was orginally posted on Medium on March 21st, 2016. You can find it
 here
[https://medium.com/p/this-app-did-the-vectordrawablecompat-diet-and-shed-2-4mb-and-it-s-so-easy-you-can-do-it-too-209846d99809]
.

If you haven’t heard already, Android now has VectorDrawableCompat
[https://medium.com/r/?url=http%3A%2F%2Fandroid-developers.blogspot.co.uk%2F2016%2F02%2Fandroid-support-library-232.html]
, hurrah!

There have been a few articles on how to use it already:

 * AppCompat v23.2 — Ag">
    <meta name="twitter:url" content="http://localhost:2368/the-vector-drawable-compat-diet/">
    <meta name="twitter:image" content="http://localhost:2368/content/images/2018/11/this_app_did_the_title_image-3.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Mike Scamell">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="vectordrawable, vectordrawablecompat, androiddev">
    <meta name="twitter:site" content="@mikescamell">
    <meta name="twitter:creator" content="@mikescamell">
    <meta property="og:image:width" content="1153">
    <meta property="og:image:height" content="544">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Mike Scamell",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Mike Scamell",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/2a389d50c33966a79a8cf6fe29c6080e?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "http://localhost:2368/author/mike/",
        "sameAs": [
            "https://twitter.com/mikescamell"
        ]
    },
    "headline": "This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!",
    "url": "http://localhost:2368/the-vector-drawable-compat-diet/",
    "datePublished": "2016-03-28T14:16:00.000Z",
    "dateModified": "2018-11-18T19:24:37.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2018/11/this_app_did_the_title_image-3.jpg",
        "width": 1153,
        "height": 544
    },
    "keywords": "vectordrawable, vectordrawablecompat, androiddev",
    "description": "This article was orginally posted on Medium on March 21st, 2016. You can find it\n here\n[https://medium.com/p/this-app-did-the-vectordrawablecompat-diet-and-shed-2-4mb-and-it-s-so-easy-you-can-do-it-too-209846d99809]\n.\n\nIf you haven’t heard already, Android now has VectorDrawableCompat\n[https://medium.com/r/?url&#x3D;http%3A%2F%2Fandroid-developers.blogspot.co.uk%2F2016%2F02%2Fandroid-support-library-232.html]\n, hurrah!\n\nThere have been a few articles on how to use it already:\n\n * AppCompat v23.2 — Ag",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <script src="../public/ghost-sdk.js?v=d3727471f6"></script>
<script>
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "07d57a1d866f"
});
</script>
    <meta name="generator" content="Ghost 2.22">
    <link rel="alternate" type="application/rss+xml" title="Mike Scamell" href="https://mikescamell.com/rss/">
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-59786101-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-59786101-4');
</script>

<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/themes/prism-okaidia.min.css">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/plugins/unescaped-markup/prism-unescaped-markup.css">

</head>
<body class="post-template tag-vectordrawable tag-vectordrawablecompat tag-androiddev">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="https://mikescamell.com">Mike Scamell</a>
            <ul class="nav" role="menu">
    <li class="nav-blog" role="menuitem"><a href="https://mikescamell.com/">Blog</a></li>
    <li class="nav-motionlayout" role="menuitem"><a href="https://mikescamell.com/tag/motionlayout/">MotionLayout</a></li>
    <li class="nav-talks" role="menuitem"><a href="https://mikescamell.com/talks/">Talks</a></li>
    <li class="nav-github" role="menuitem"><a href="https://github.com/mikescamell">Github</a></li>
    <li class="nav-android-snacks-podcast" role="menuitem"><a href="https://androidsnacks.simplecast.com/">Android Snacks Podcast</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-tw" href="https://twitter.com/mikescamell" title="Twitter" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
</a>
        </div>
            <a class="rss-button" href="https://feedly.com/i/subscription/feed/http://localhost:2368/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-vectordrawable tag-vectordrawablecompat tag-androiddev ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2016-03-28">28 March 2016</time>
                        <span class="date-divider">/</span> <a href="../tag/vectordrawable/">vectordrawable</a>
                </section>
                <h1 class="post-full-title">This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!</h1>
            </header>

            <figure class="post-full-image">
                <img srcset="../content/images/size/w300/2018/11/this_app_did_the_title_image-3.jpg 300w,
                           ../content/images/size/w600/2018/11/this_app_did_the_title_image-3.jpgg 600w,
                          ../content/images/size/w1000/2018/11/this_app_did_the_title_image-3.jpg 1000w,
                         ../content/images/size/w2000/2018/11/this_app_did_the_title_image-3.jpg 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="../content/images/size/w2000/2018/11/this_app_did_the_title_image-3.jpg" alt="This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!">
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p><em>This article was orginally posted on Medium on March 21st, 2016. You can find it <a href="https://medium.com/p/this-app-did-the-vectordrawablecompat-diet-and-shed-2-4mb-and-it-s-so-easy-you-can-do-it-too-209846d99809">here</a>.</em></p><p>If you haven’t heard already, <a href="https://medium.com/r/?url=http%3A%2F%2Fandroid-developers.blogspot.co.uk%2F2016%2F02%2Fandroid-support-library-232.html">Android now has VectorDrawableCompat</a>, hurrah!</p><p>There have been a few articles on how to use it already:</p><ul><li><a href="https://medium.com/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88#.teutrkhu1">AppCompat v23.2 — Age of the vectors</a> by <a href="https://twitter.com/chrisbanes">Chris Banes</a></li><li><a href="https://medium.com/r/?url=https%3A%2F%2Fblog.stylingandroid.com%2Fvectors-for-all-finally%2F">Vectors for all (finally)</a> by <a href="https://twitter.com/MarkIAllison">Mark Allison</a></li></ul><p>They both do a good job explaining how to implement VectorDrawableCompat into your project. So I’m just going to talk about a few things I ran into and how it’s going to affect an app on the playstore.</p><p>One thing I do want to make clear, even if you’re not going to be using VectorDrawableCompat in your project, is this (paraphrasing Chris Banes):</p><p><strong><em>If you do not use the compat vector functionality yourself, you still need to make changes to your code as AppCompat needs it.</em></strong></p><p>Please be aware of this and go see his post on how to code for this. It’s just a simple copy/paste job into your gradle file.</p><h2 id="it-s-bigger-than-i-thought-that-s-what-she-said-">It’s bigger than I thought (that’s what she said)</h2><p>When I first created the <a href="https://play.google.com/store/apps/details?id=com.fixsportsstatsltd.fantasyfootballfix">Fantasy Football Fix</a> app back in December 2015 I was keen on implementing <a href="http://developer.android.com/reference/android/graphics/drawable/VectorDrawable.html">VectorDrawables</a>. The issue I ran into was this; I wanted as many images as possible to be vector format, for as many densities as possible, from Lollipop onwards. This was a struggle because at the time there were only some third party libraries, with some being <a href="https://github.com/telly/MrVector">deprecated</a>. With this in mind, I wanted to wait for an official Google implementation. While I was waiting I had to do the following:</p><figure class="kg-card kg-image-card"><img src="https://mikescamell.com/content/images/2017/01/drawables_folder_overload.jpg" class="kg-image"></figure><p>Why all the folders? I needed vectors for any devices that were on Lollipop+ but I also needed folders for the devices that weren’t and for each density I was choosing to support. It was a pain, but my love of crisp images was not enough to drive me away!</p><p>All in all the app weighed in at 10.5MB (with proguard enabled). It was bigger than I first thought it would be, but I have a few libraries in there as well. It wasn’t too outrageous as far as I was concerned. The app was released successfully on the playstore and life went on. Until now.</p><h2 id="your-bum-no-longer-looks-big-in-that">Your bum no longer looks big in that</h2><p>This past weekend I decided to update the support libraries and try my hand at implementing VectorDrawableCompat to see how much weight the app could lose. Following along with Chris Banes’s article I made changes to my gradle file. I then proceeded to remove all the unnecessary drawable folders. After, it looked like this:</p><figure class="kg-card kg-image-card"><img src="https://mikescamell.com/content/images/2017/01/drawble_folders_reduced.jpg" class="kg-image"></figure><p>A lot better right? Because i’m using vectors for a majority of my images they can all be placed in the drawable folder. What’s leftover is a few things that I hope to move to vector format once I can get the SVGs to convert them.</p><p>Next I searched my ImageViews in XML for the <code>android:src</code> attribute and change it to <code>app:srcCompat</code>. Make sure you get them all if you decide to go all out like me. If you don’t, then you’ll likely get a crash on devices pre-Lollipop. The last thing to do was scan my code for references to setting drawables e.g. in a custom view. For example my custom PlayerView had this code at the bottom to factor in deprecation of methods:</p><pre><code>    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {
        points.setBackground(
            ResourcesCompat.getDrawable(getResources(),
            R.drawable.bench_text_bg, 
            null));
        name.setBackground(
            ResourcesCompat.getDrawable(getResources(),
            R.drawable.bench_text_bg, 
            null));
    } else {
        points.setBackgroundDrawable(
            ResourcesCompat.getDrawable(getResources(),
            R.drawable.bench_text_bg, 
            null);
        name.setBackgroundDrawable(
            ResourcesCompat.getDrawable(getResource(), 
            R.drawable.bench_text_bg, 
            null));
    }
</code></pre><p>Now, it doesn’t matter what version of the app is being used as we’re going to be setting the images the same way. They now get set using <code>setBackgroundResource()</code> rather than <code>setImageDrawable()</code>:</p><pre><code>    points.setBackgroundResource(R.drawable.bench_text_bg);
    name.setBackgroundResource(R.drawable.bench_text_bg);
</code></pre><p>You can also do the same when setting images, just change from <code>setImageDrawable()</code> to <code>setImageResource()</code>:</p><pre><code>bottomBarRankIndicator.setImageResource(R.drawable.ic_points_up);
</code></pre><p>I did have a lint issue at one point with Android Studio v1.5 informing me that when I had set the attribute to <code>app:srcCompat</code> on an ImageView in XML. This was “Unexpected namespace prefix ‘app’ found for tag ImageView”. Despite this the app still seemed to work fine and the image shows, so it must be a false alarm.</p><h2 id="fantasy-football-fix-lost-2-4mb-this-week-everyone-let-s-give-it-a-round-of-applause-">Fantasy Football Fix lost 2.4MB this week everyone! Let’s give it a round of applause!</h2><p>So after testing this all out in debug and on all supported versions of Android I built the release. I was surprised at the difference. The app had gone from 10.5MB to 8.1MB! A 2.4MB drop. I was really happy with this. One because it removed that magic 10 number from the size, but also because the app’s second largest user country is India. And we should all know by now about trying our best to help <a href="https://vimeo.com/144804323">accommodate these users</a>, and reducing our app is size is one sure fire way to do it.</p><p>So VectorDrawableCompat is a really easy way to reduce your app size. The question is, can you beat my reduction?!</p><p><em>P.S Bonus material, go watch <a href="https://skillsmatter.com/skillscasts/6617-vector-all-the-things">Vector All the Things</a> by Mark Allison, one of my favourite droidcon London talks and should definitely swing you round to vectors</em></p>
                </div>
            </section>


            <footer class="post-full-footer">


                    
<section class="author-card">
        <img class="author-profile-image" src="http://www.gravatar.com/avatar/2a389d50c33966a79a8cf6fe29c6080e?s=250&amp;d=mm&amp;r=x" alt="Mike Scamell">
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="../author/mike/">Mike Scamell</a></h4>
            <p>Read <a href="../author/mike/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="../author/mike/">Read More</a>
</div>


            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">

                <article class="post-card post tag-androiddev tag-okhttp ">

    <a class="post-card-image-link" href="../gotcha-when-offline-caching-with-okhttp3/">
        <img class="post-card-image" srcset="../content/images/size/w300/2018/11/7spg5olfexc-roman-kraft--1-.jpg 300w,
                   ../content/images/size/w600/2018/11/7spg5olfexc-roman-kraft--1-.jpgg 600w,
                  ../content/images/size/w1000/2018/11/7spg5olfexc-roman-kraft--1-.jpg 1000w,
                 ../content/images/size/w2000/2018/11/7spg5olfexc-roman-kraft--1-.jpg 2000w" sizes="(max-width: 1000px) 400px, 700px" src="../content/images/size/w600/2018/11/7spg5olfexc-roman-kraft--1-.jpg" alt="Gotcha when offline caching with OkHttp3">
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../gotcha-when-offline-caching-with-okhttp3/">

            <header class="post-card-header">
                    <span class="post-card-tags">androiddev</span>
                <h2 class="post-card-title">Gotcha when offline caching with OkHttp3</h2>
            </header>

            <section class="post-card-excerpt">
                <p>I recently was trying to use an offline cache with OkHttp to store some information. This is handy if the user goes offline and we want them to still see some information.I'd</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Mike Scamell
                    </div>

                        <a href="../author/mike/" class="static-avatar">
                            <img class="author-profile-image" src="http://www.gravatar.com/avatar/2a389d50c33966a79a8cf6fe29c6080e?s=250&amp;d=mm&amp;r=x" alt="Mike Scamell">
                        </a>
                </li>
            </ul>

            <span class="reading-time">2 min read</span>

        </footer>

    </div>

</article>

                <article class="post-card post tag-food tag-keto tag-recipe ">

    <a class="post-card-image-link" href="../low-carb-chocolate-peanut-butter-bombs/">
        <img class="post-card-image" srcset="../content/images/size/w300/2018/11/IMG_20160320_134706.jpg 300w,
                   ../content/images/size/w600/2018/11/IMG_20160320_134706.jpgg 600w,
                  ../content/images/size/w1000/2018/11/IMG_20160320_134706.jpg 1000w,
                 ../content/images/size/w2000/2018/11/IMG_20160320_134706.jpg 2000w" sizes="(max-width: 1000px) 400px, 700px" src="../content/images/size/w600/2018/11/IMG_20160320_134706.jpg" alt="Low Carb Chocolate Peanut Butter Bombs">
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../low-carb-chocolate-peanut-butter-bombs/">

            <header class="post-card-header">
                    <span class="post-card-tags">food</span>
                <h2 class="post-card-title">Low Carb Chocolate Peanut Butter Bombs</h2>
            </header>

            <section class="post-card-excerpt">
                <p>I've recently joined the keto brigade. I'm enjoying the weight loss and experimenting with different foods. Even if it is at the expense of carbs. I'm also enjoying all the bacon, chocolate and</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Mike Scamell
                    </div>

                        <a href="../author/mike/" class="static-avatar">
                            <img class="author-profile-image" src="http://www.gravatar.com/avatar/2a389d50c33966a79a8cf6fe29c6080e?s=250&amp;d=mm&amp;r=x" alt="Mike Scamell">
                        </a>
                </li>
            </ul>

            <span class="reading-time">3 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://mikescamell.com">
            <span>Mike Scamell</span>
        </a>
    </div>
    <span class="floating-header-divider">—</span>
    <div class="floating-header-title">This app did the VectorDrawableCompat diet and shed 2.4MB! And it’s so easy, you can do it too!</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"></path>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=This%20app%20did%20the%20VectorDrawableCompat%20diet%20and%20shed%202.4MB!%20And%20it%E2%80%99s%20so%20easy%2C%20you%20can%20do%20it%20too!&amp;url=https://mikescamell.com/the-vector-drawable-compat-diet/" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://mikescamell.com/the-vector-drawable-compat-diet/" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path></svg>
        </a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://mikescamell.com">Mike Scamell</a> © 2019</section>
                <nav class="site-footer-nav">
                    <a href="https://mikescamell.com">Latest Posts</a>
                    
                    <a href="https://twitter.com/mikescamell" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="../assets/built/jquery.fitvids.js?v=d3727471f6"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('#reading-progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/prism.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/components/prism-xml.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/components/prism-kotlin.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.16.0/plugins/unescaped-markup/prism-unescaped-markup.min.js"></script>

</body>
